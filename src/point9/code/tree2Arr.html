<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <h1>树转数组</h1>
  <script>
    const treeNode = {
      id: 1,
      name: '部门A',
      children: [
       {
         id: 2,
         name: '部门B',
         children: [
         { id: 4, name: '部门D',  },
         { id: 5, name: '部门E',  }
         ]
       },{
         id: 3,
         name: '部门C',
         children: [
         { id: 6, name: '部门F',  }
         ]
       } 
      ]
    }

    function convert(treeNode) {
       const _nodeMap = new Map()
       const _temps = []

       const queue = []
       queue.unshift(treeNode)

       while(queue.length > 0) {
         const currNode = queue.pop()
         const { id, name, children = [] } = currNode

         const parentNode = _nodeMap.get(currNode)
         const parentId = parentNode?.id || 0

         const node = { id, name, parentId }
         _temps.push(node)

         children.forEach(child => {
           _nodeMap.set(child, currNode)
           queue.unshift(child)
         });
       }

       return _temps
    }
    
    console.log(convert(treeNode))
  </script>
</body>
</html>